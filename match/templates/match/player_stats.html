{% extends 'match/base.html' %}

{% block css %}
<style>
    .nav-link {
        margin-right: 30px;
    }
    .nav-link#stats {
        color:red !important;
        border-bottom: solid 3px red !important;
    }
    .hover-nav:hover {
        color:red !important;
        border-bottom: solid 3px red !important;
    }

    a {
      text-decoration: none;
    } 
    table.center {
        margin-left:auto; 
        margin-right:auto;
    }
    button[aria-selected="true"] {
        color: white !important;
    }
    .btn-outline-dark {
        color: black !important;
    }
    .btn-outline-dark:hover {
        color: white !important;
    }

    .form-select-clone {
      display:block !important;
      padding:.375rem .75rem .375rem .75rem !important;
      width:68%;
      font-size:1rem !important;
      font-weight:400 !important;
      line-height:1.5 !important;
      color:#212529 !important;
      background-color:#fff !important;
      background-repeat:no-repeat;
      background-position:right .75rem center;
      background-size:16px 12px !important;
      border:1px solid #ced4da !important;
      border-radius:.375rem !important;
      transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;
      -webkit-appearance:none;
      -moz-appearance:none;
      appearance:none;
  }

  table.dataTable.no-footer > tbody > tr:last-child > td {
    border-bottom: none;
  }
  table {
    border-radius: 5px;
  }

  .hiddenLink {
        text-decoration: inherit !important;
  }
</style>
{% endblock %}

{% block scripts %}
<script>
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl)
    })
</script>

<script>
    function resetFilter() {
        // Clear all filter inputs
        $('#map').val('All');
        $('#agent').val('All');
        $('#role').val('All');
        $('#outcome').val('All');
        $('#minMP').val(0);
        $('#dateRange').data('daterangepicker').setStartDate(moment("01/01/2023", "MM/DD/YYYY"));
        $('#dateRange').data('daterangepicker').setEndDate(moment().add(1, 'days'));

    
        // Submit the filter form to reset the table
        $('#filter-form').submit();
    }
</script>

<script type="text/javascript">
    $(document).ready(function() {
        var table = $('#table-basic').DataTable( {
            columnDefs: [{
                orderable: false, targets: [0] 
            }],
            "paging": false,
            "info": false,
            "searching": false,
            order: [[1, 'desc']]
        });
    });
</script>

<script type="text/javascript">
    $(document).ready(function() {
        var table = $('#table-rate').DataTable( {
            columnDefs: [{
                orderable: false, targets: [0] 
            }],
            "paging": false,
            "info": false,
            "searching": false,
            order: [[1, 'desc']]
        });
    });
</script>

<script type="text/javascript">
    $(document).ready(function() {
        var table = $('#table-side').DataTable( {
            columnDefs: [{
                orderable: false, targets: [0] 
            }],
            "paging": false,
            "info": false,
            "searching": false,
            order: [[1, 'desc']]
        });
    });
</script>

<script type="text/javascript">
    $(document).ready(function() {
        var table = $('#table-highs').DataTable( {
            columnDefs: [{
                orderable: false, targets: [0] 
            }],
            "paging": false,
            "info": false,
            "searching": false,
            order: [[1, 'desc']]
        });
    });
</script>

<script type="text/javascript">
    function showTable(tableId) {
      // Hide all table divs
      document.querySelectorAll('.tab-pane').forEach(function(div) {
        div.style.display = 'none';
      });
      
      // Show the selected table div
      document.getElementById('table-' + tableId).style.display = 'block';
    }
</script>

<script type="text/javascript">
  $(function() {

      var start = moment("{% if date_filter is None %}01/01/2023{% else %}{{ start_date }}{% endif %}", 'MM/DD/YYYY');
      var end = {% if date_filter is None %}moment().add(1, 'days'){% else %}moment("{{ end_date }}", "MM/DD/YYYY"){% endif %};
  
      function cb(start, end) {
          $('#dateRange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
      }
  
      $('#dateRange').daterangepicker({
          startDate: start,
          endDate: end,
          ranges: {
             'Today': [moment(), moment()],
             'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
             'Last 7 Days': [moment().subtract(6, 'days'), moment()],
             'Last 30 Days': [moment().subtract(29, 'days'), moment()],
             'This Month': [moment().startOf('month'), moment().endOf('month')],
             'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
          }
      }, cb);
  
      cb(start, end);
  
  });
  </script>

<!--
<script>
$(document).ready(function() {
  $('#minMP').on('change', function() {
    var minMp = $(this).val();
    $('table').each(function() { // loop through all tables
      $(this).find('tbody tr').each(function() { // select rows in table
        var rowMp = parseInt($(this).find('td.mp').text());
        if (rowMp < minMp) {
          $(this).hide();
        } else {
          $(this).show();
        }
      });
    });
  });
});
</script>
-->
{% endblock %}

{% block content %}
<br>

<div class="container">

  <h2 style="text-align:center">Player Statistics</h2>
  <br>

  <div style="width:75%; margin-left:auto; margin-right:auto">
  <form method="get" action="" id="filter-form">
    <div class="row mb-2 ">

      <div class="col-md-2">
        <label for="map" class="form-label">Map:</label>
        <select id="map" name="map" class="form-select">
          <option value="">All</option>
          {% for map in unique_maps %}
            <option value="{{ map }}" {% if map == map_filter %}selected{% endif %}>{{ map }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-2">
        <label for="agent" class="form-label">Agent:</label>
        <select id="agent" name="agent" class="form-select">
          <option value="">All</option>
          {% for agent in unique_agents %}
            <option value="{{ agent }}" {% if agent == agent_filter %}selected{% endif %}>{{ agent }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-2">
        <label for="role" class="form-label">Role:</label>
        <select id="role" name="role" class="form-select">
          <option value="">All</option>
          {% for role in unique_roles %}
            <option value="{{ role }}" {% if role == role_filter %}selected{% endif %}>{{ role }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-2">
        <label for="outcome" class="form-label">Outcome:</label>
        <select id="outcome" name="outcome" class="form-select">
          <option value="">All</option>
          <option value="win" {% if outcome_filter == "win" %}selected{% endif %}>Win</option>
          <option value="loss" {% if outcome_filter == "loss" %}selected{% endif %}>Loss</option>
          <option value="draw" {% if outcome_filter == "draw" %}selected{% endif %}>Draw</option>
        </select>
      </div>

      <div class="col-md-2">
        <label for="minMP" class="form-label">Minimum Matches:</label>
        <input type="range" 
          class="form-control-range" 
          name="minMP"
          id="minMP" 
          onChange="document.getElementById('rangeval').innerText = document.getElementById('minMP').value"
          {% if mp_filter is None %} value=0 {% else %} value={{ mp_filter }} {% endif %}
          min = 0
          max = {{ max_matches }}>
        <span id="rangeval">{% if mp_filter is None %} 0 {% else %} {{ mp_filter }} {% endif %}</span>
      </div>

    </div>

    <div class="row mb-4">

      <div class="col-md-4">
        <label for="dateRange" class="form-label">Date Range:</label>
        <br>
        <input type="text" id="dateRange" name="dateRange" class="form-select-clone" {% if date_filter is None %} value="" {% else %} value={{ date_filter }} {% endif %}/>
      </div>

    </div>

    <button type="submit" class="btn btn-primary">Filter</button>
    <button type="button" class="btn btn-secondary" href="{% url 'player_stats' %}" onclick="resetFilter()">Reset</button>
  </form>
  </div>

  <ul class="nav justify-content-center" style="margin-top:1%">
    <li class="nav-item">
        <button class="nav-link btn btn-outline-dark shadow-sm active" data-bs-toggle="tab" data-bs-target="#tab-basic">Basic</button>
    </li>
    <li class="nav-item">
        <button class="nav-link btn btn-outline-dark shadow-sm" data-bs-toggle="tab" data-bs-target="#tab-rate">Rate</button>
    </li>
    <li class="nav-item">
        <button class="nav-link btn btn-outline-dark shadow-sm" data-bs-toggle="tab" data-bs-target="#tab-side">Side</button>
    </li>
    <li class="nav-item">
        <button class="nav-link btn btn-outline-dark shadow-sm" data-bs-toggle="tab" data-bs-target="#tab-highs">Highs</button>
    </li>
  </ul>

  <br>

  <div class="tab-content">

  <div id="tab-basic" class="tab-pane active table-responsive-lg">
    <table id="table-basic" class=" table table-hover table-striped table-sm center"
           style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
      <thead>
        <tr>
            <th>Player</th>
            <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
            <th style="text-align:center;" title="Percentage of Matches Won" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
            <th style="text-align:center;" title="Kills per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K/20</th>
            <th style="text-align:center;" title="Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
            <th style="text-align:center;" title="Average Damage Delta" data-bs-toggle="tooltip" data-bs-placement="top">DD</th>
            <th style="text-align:center;" title="Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
            <th style="text-align:center;" title="Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
            <th style="text-align:center;" title="Headshot Percentage" data-bs-toggle="tooltip" data-bs-placement="top">HS%</th>
            <th style="text-align:center;" title="Percent of Rounds with 1+ Kill" data-bs-toggle="tooltip" data-bs-placement="top">K%</th>
            <th style="text-align:center;" title="Killed/Assisted/Survived/Traded Round Percentage" data-bs-toggle="tooltip" data-bs-placement="top">KAST%</th>
        </tr>
      </thead>
      <tbody>
        {% for p in player_stats %}
          <tr>
            <td><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.TopAgent }}" data-bs-toggle="tooltip" data-bs-placement="top"> <a class="hiddenLink" href="{% url 'player_detail' p.Username %}">{{ p.DisplayName }} <span class="badge" style="color:white; background-color:grey">{{ p.UserTag }}</span></a></td>
            <td class="mp" style="text-align:center;">{{ p.num_matches }}</td>
            <td style="text-align:center; {% if p.win_pct > 0.5 %}color:green{% elif p.win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.WinLossRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.win_pct|floatformat:3 }}</td>
            <td style="text-align:center;">{{ p.kills_per_20|floatformat:1 }}</td>
            <td style="text-align:center; {% if p.kdr > 1 %}color:green{% elif p.kdr == 1 %}{% else %}color:red{% endif %}">{{ p.kdr|floatformat:2 }}</td>
            <td style="text-align:center; {% if p.damage_delta > 0 %}color:green{% elif p.damage_delta == 0 %}{% else %}color:red{% endif %}">{{ p.damage_delta|floatformat:0 }}</td>
            <td style="text-align:center;">{{ p.acs|floatformat:1 }}</td>
            <td style="text-align:center;">{{ p.adr|floatformat:1 }}</td>
            <td style="text-align:center;">{{ p.hs_pct|floatformat:2 }}</td>
            <td style="text-align:center; {% if p.k_pct > 0.5 %}color:green{% elif p.k_pct == 0.5 %}{% else %}color:red{% endif %}">{{ p.k_pct|floatformat:3 }}</td>
            <td style="text-align:center;">{{ p.kast|floatformat:3 }}</td>
        </tr>
        {% empty %}
          <tr>
            <td>No data found</td>
            <td> </td>
            <td> </td>
            <td></td>
            <td> </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div id="tab-rate" class="tab-pane table-responsive-lg">
    <table id="table-rate" class=" table table-hover table-striped table-sm center"
           style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
      <thead>
        <tr>
            <th>Player</th>
            <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
            <th style="text-align:center;" title="Percentage of Rounds Won" data-bs-toggle="tooltip" data-bs-placement="top">Rd Win%</th>
            <th style="text-align:center;" title="Kills per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
            <th style="text-align:center;" title="Deaths per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
            <th style="text-align:center;" title="Assists per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">A</th>
            <th style="text-align:center;" title="Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
            <th style="text-align:center;" title="Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
            <th style="text-align:center;" title="Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
            <th style="text-align:center;" title="First Bloods per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">FB</th>
            <th style="text-align:center;" title="First Deaths per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">FD</th>
            <th style="text-align:center;" title="First Blood/First Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">FB/FD</th>
        </tr>
      </thead>
      <tbody>
        {% for p in player_stats %}
          <tr>
            <td style="width:7%"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.TopAgent }}" data-bs-toggle="tooltip" data-bs-placement="top"> <a class="hiddenLink" href="{% url 'player_detail' p.Username %}">{{ p.DisplayName }} <span class="badge" style="color:white; background-color:grey">{{ p.UserTag }}</span></a></td>
            <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
            <td style="text-align:center; width:2%; {% if p.round_win_pct > 0.5 %}color:green{% elif p.RoundWinPct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.RoundRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.round_win_pct|floatformat:3 }}</td>
            <td style="text-align:center; width:1%">{{ p.kills_per_20|floatformat:1 }}</td>
            <td style="text-align:center; width:1%">{{ p.deaths_per_20|floatformat:1 }}</td>
            <td style="text-align:center; width:1%">{{ p.assists_per_20|floatformat:1 }}</td>
            <td style="text-align:center; width:1%; {% if p.kdr > 1 %}color:green{% elif p.kdr == 1 %}{% else %}color:red{% endif %}">{{ p.kdr|floatformat:2 }}</td>
            <td style="text-align:center; width:1%">{{ p.acs|floatformat:1 }}</td>
            <td style="text-align:center; width:1%">{{ p.adr|floatformat:1 }}</td>
            <td style="text-align:center; width:1%">{{ p.fb_per_20|floatformat:1 }}</td>
            <td style="text-align:center; width:1%">{{ p.fd_per_20|floatformat:1 }}</td>
            <td style="text-align:center; width:1%; {% if p.fb_fd_ratio > 1 %}color:green{% elif p.fb_fd_ratio == 1 %}{% else %}color:red{% endif %}">{{ p.fb_fd_ratio|floatformat:2 }}</td>
      </tr>
        {% empty %}
          <tr>
            <td>No data found</td>
            <td> </td>
            <td> </td>
            <td></td>
            <td> </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div id="tab-side" class="tab-pane table-responsive-lg">
    <table id="table-side" class=" table table-hover table-striped table-sm center"
           style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
      <thead>
        <tr>
          <th></th>
          <th style="border-right:1px solid rgb(222, 226, 230)"></th>
          <th colspan="5" style="text-align:center; border-right:1px solid rgb(222, 226, 230)">Attack</th>
          <th colspan="5" style="text-align:center">Defense</th>
        </tr>
        <tr>
            <th>Player</th>
            <th style="text-align:center; border-right:1px solid rgb(222, 226, 230)" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
            <th style="text-align:center" title="Attack Win Percentage" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
            <th style="text-align:center" title="Attack Kills per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
            <th style="text-align:center" title="Attack Deaths per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
            <th style="text-align:center" title="Attack Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
            <th style="text-align:center; border-right:1px solid rgb(222, 226, 230)" title="Attack Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
            <th style="text-align:center" title="Defense Win Percentage" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
            <th style="text-align:center" title="Defense Kills per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
            <th style="text-align:center" title="Defense Deaths per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
            <th style="text-align:center" title="Defense Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
            <th style="text-align:center;" title="Defense Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
        </tr>
      </thead>
      <tbody>
        {% for p in player_stats %}
          <tr>
            <td style="width:7%"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.TopAgent }}" data-bs-toggle="tooltip" data-bs-placement="top"> <a class="hiddenLink" href="{% url 'player_detail' p.Username %}">{{ p.DisplayName }} <span class="badge" style="color:white; background-color:grey">{{ p.UserTag }}</span></a></td>
            <td class="mp" style="text-align:center; width:0.5%; border-right:1px solid rgb(222, 226, 230)">{{ p.num_matches }}</td>
            <td style="text-align:center; width:0.2%; {% if p.attack_win_pct > 0.5 %}color:green{% elif p.attack_win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.AttackRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.attack_win_pct|floatformat:3 }}</td>
            <td style="text-align:center; width:1%;">{{ p.attack_kp12|floatformat:1 }}</td>
            <td style="text-align:center; width:1%;">{{ p.attack_dp12|floatformat:1 }}</td>
            <td style="text-align:center; width:1%; {% if p.attack_kdr > 1 %}color:green{% elif p.attack_kdr == 1 %}{% else %}color:red{% endif %}">{{ p.attack_kdr|floatformat:2 }}</td>
            <td style="text-align:center; width:1%; border-right:1px solid rgb(222, 226, 230)">{{ p.attack_adr|floatformat:1 }}</td>
            <td style="text-align:center; width:0.2%; {% if p.defense_win_pct > 0.5 %}color:green{% elif p.defense_win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.DefenseRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.defense_win_pct|floatformat:3 }}</td>
            <td style="text-align:center; width:1%;">{{ p.defense_kp12|floatformat:1 }}</td>
            <td style="text-align:center; width:1%;">{{ p.defense_dp12|floatformat:1 }}</td>
            <td style="text-align:center; width:1%; {% if p.defense_kdr > 1 %}color:green{% elif p.defense_kdr == 1 %}{% else %}color:red{% endif %}">{{ p.defense_kdr|floatformat:2 }}</td>
            <td style="text-align:center; width:1%;">{{ p.defense_adr|floatformat:1 }}</td>
          </tr>
        {% empty %}
          <tr>
            <td>No data found</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div id="tab-highs" class="tab-pane table-responsive-lg">
    <table id="table-highs" class=" table table-hover table-striped table-sm center"
           style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
      <thead>
        <tr>
            <th>Player</th>
            <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
            <th style="text-align:center;" title="Most Kills" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
            <th style="text-align:center;" title="Most Deaths" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
            <th style="text-align:center;" title="Most Assists" data-bs-toggle="tooltip" data-bs-placement="top">A</th>
            <th style="text-align:center;" title="Highest Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
            <th style="text-align:center;" title="Highest Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
            <th style="text-align:center;" title="Highest Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
            <th style="text-align:center;" title="Most First Bloods" data-bs-toggle="tooltip" data-bs-placement="top">FB</th>
            <th style="text-align:center;" title="Most First Deaths" data-bs-toggle="tooltip" data-bs-placement="top">FD</th>
        </tr>
      </thead>
      <tbody>
        {% for p in player_stats %}
          <tr>
            <td style="width:7%"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.TopAgent }}" data-bs-toggle="tooltip" data-bs-placement="top"> <a class="hiddenLink" href="{% url 'player_detail' p.Username %}">{{ p.DisplayName }} <span class="badge" style="color:white; background-color:grey">{{ p.UserTag }}</span></a></td>
            <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
            <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_kills_id %}">{{ p.max_kills }}</a></td>
            <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_deaths_id %}">{{ p.max_deaths }}</a></td>
            <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_assists_id %}">{{ p.max_assists }}</a></td>
            <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_kdr_id %}">{{ p.max_kdr|floatformat:2 }}</a></td>
            <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_acs_id %}">{{ p.max_acs }}</a></td>
            <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_adr_id %}">{{ p.max_adr|floatformat:1 }}</a></td>
            <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_fb_id %}">{{ p.max_fb }}</a></td>
            <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_fd_id %}">{{ p.max_fd }}</a></td>
      </tr>
        {% empty %}
          <tr>
            <td>No data found</td>
            <td> </td>
            <td> </td>
            <td></td>
            <td> </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  
</div>
</div>
{% endblock %}
