{% extends 'match/base.html' %}

{% block css %}
<style>
  @media screen and (max-width: 768px) {
    .nav-tabs {
      width: 100% !important;
    }
  }

  a {
    text-decoration: none;
  }

  table.dataTable.no-footer > tbody > tr:last-child > td {
    border-bottom: none;
  }
  table {
    border-radius: 5px;
  }

  .hiddenLink {
        text-decoration: inherit !important;
  }

  hr {
    background-color: black !important;
    color: black !important;
    border: solid 1px black !important;
  }

  .nav-tabs {
    width: 75%;
  }

  .nav-custom {
    color: black !important;
    border: solid 1px rgb(168, 168, 168) !important;
    border-bottom: none !important;
  }

  a.active, .nav-custom:hover {
    color: white !important;
    background-color: black !important;
    border: solid 1px rgb(168, 168, 168) !important;
    border-bottom: none !important;
  }

   .nav-link {
        margin-right: 30px;
    }
    .nav-link#None {
        color:red !important;
        border-bottom: solid 3px red !important;
    }
    .hover-nav:hover {
        color:red !important;
        border-bottom: solid 3px red !important;
    }
</style>
{% endblock %}

{% block scripts %}
<script>
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl)
    })
</script>
{% endblock %}

{% block content %}
<br>

<div class="container">

  <div class="p-2" style="width: fit-content; overflow: hidden; text-align: center; margin-left: auto; margin-right: auto;">
    <div style="display: inline-block; vertical-align: middle;">
      <img src="{{ topAgentImage }}" alt="{{ topAgent }}" height="60px" title="Most Played Agent: {{ topAgent }}" data-bs-toggle="tooltip" data-bs-placement="top">
    </div>
    <div style="display: inline-block; vertical-align: middle; white-space: nowrap;">
      <h1 style="font-weight:bold"
      title="{{ username }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ displayName }}</h1>
    </div>
  </div>

  <div id="buttons" style="text-align:center; margin-top: 1%;">
    <div style="display: inline-block;">
      <a class="btn btn-outline-dark shadow-sm" style="font-size:100%; margin:5px" href="{% url 'player_detail' username %}" role="button">Overview</a>
      <a class="btn btn-outline-dark shadow-sm active" style="font-size:100%; margin:5px" href="{% url 'player_splits' username %}" role="button">Splits</a>
      <a class="btn btn-outline-dark shadow-sm" style="font-size:100%; margin:5px" href="{% url 'player_teammates' username %}" role="button">Teammates</a>
      <a class="btn btn-outline-dark shadow-sm" style="font-size:100%; margin:5px" href="{% url 'match_list' %}?{{ displayName }}=1" role="button">Matches</a>
      <a class="btn btn-outline-dark shadow-sm" style="font-size:100%; margin:5px" href="{% url 'player_gamelog' username %}" role="button">Game Log</a>
    </div>
  </div>

  <hr>

  <h2 style="text-align:center; font-weight:normal">Splits</h2>

  <br>
  <h4 style="font-weight:normal">Role</h4>

  <ul class="nav nav-tabs" id="roleTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom active" style="font-size:80%;" id="basic-tab" data-bs-toggle="tab" href="#role-basic" role="tab">Basic</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom" style="font-size:80%;" id="rate-tab" data-bs-toggle="tab" href="#role-rate" role="tab">Rate</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom" style="font-size:80%;" id="side-tab" data-bs-toggle="tab" href="#role-side" role="tab">Side</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom" style="font-size:80%;" id="highs-tab" data-bs-toggle="tab" href="#role-highs" role="tab">Highs</a>
    </li>
  </ul>

  <div id="role-tabs" class="tab-content">

    <div id="role-basic" class="tab-pane active table-responsive-lg">
      <table id="table-role-basic" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
              <th>Role</th>
              <th style="text-align:center;" title="Top Agent Played (Hover for all agents)" data-bs-toggle="tooltip" data-bs-placement="top">Top Agent</th>
              <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center;" title="Percentage of Matches Won" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
              <th style="text-align:center;" title="Kills per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K/20</th>
              <th style="text-align:center;" title="Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Average Damage Delta" data-bs-toggle="tooltip" data-bs-placement="top">DD</th>
              <th style="text-align:center;" title="Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
              <th style="text-align:center;" title="Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center;" title="Headshot Percentage" data-bs-toggle="tooltip" data-bs-placement="top">HS%</th>
              <th style="text-align:center;" title="Percent of Rounds with 1+ Kill" data-bs-toggle="tooltip" data-bs-placement="top">K%</th>
              <th style="text-align:center;" title="Killed/Assisted/Survived/Traded Round Percentage" data-bs-toggle="tooltip" data-bs-placement="top">KAST%</th>
          </tr>
        </thead>
        <tbody>
          {% for p in role_splits %}
            <tr>
              <td style="width:4%"> {{ p.Role }} </td>
              <td style="width:2%; text-align:center"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.AgentString }}" data-bs-toggle="tooltip" data-bs-placement="top"></td>
              <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
              <td style="text-align:center; width:1%; {% if p.win_pct > 0.5 %}color:green{% elif p.win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.WinLossRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%;">{{ p.kills_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.kdr > 1 %}color:green{% elif p.kdr == 1 %}{% else %}color:red{% endif %}">{{ p.kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%; {% if p.damage_delta > 0 %}color:green{% elif p.damage_delta == 0 %}{% else %}color:red{% endif %}">{{ p.damage_delta|floatformat:0 }}</td>
              <td style="text-align:center; width:1%">{{ p.acs|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.adr|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.hs_pct|floatformat:2 }}</td>
              <td style="text-align:center; width:1%; {% if p.k_pct > 0.5 %}color:green{% elif p.k_pct == 0.5 %}{% else %}color:red{% endif %}">{{ p.k_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%">{{ p.kast|floatformat:3 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div id="role-rate" class="tab-pane table-responsive-lg">
      <table id="table-role-rate" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
              <th>Role</th>
              <th style="text-align:center;" title="Top Agent Played (Hover for all agents)" data-bs-toggle="tooltip" data-bs-placement="top">Top Agent</th>
              <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center;" title="Percentage of Rounds Won" data-bs-toggle="tooltip" data-bs-placement="top">Rd Win%</th>
              <th style="text-align:center;" title="Kills per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center;" title="Deaths per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center;" title="Assists per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">A</th>
              <th style="text-align:center;" title="Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
              <th style="text-align:center;" title="Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center;" title="First Bloods per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">FB</th>
              <th style="text-align:center;" title="First Deaths per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">FD</th>
              <th style="text-align:center;" title="First Blood/First Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">FB/FD</th>
          </tr>
        </thead>
        <tbody>
          {% for p in role_splits %}
            <tr>
              <td style="width:4%"> {{ p.Role }} </td>
              <td style="width:2%; text-align:center"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.AgentString }}" data-bs-toggle="tooltip" data-bs-placement="top"></td>
              <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
              <td style="text-align:center; width:2%; {% if p.round_win_pct > 0.5 %}color:green{% elif p.RoundWinPct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.RoundRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.round_win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%">{{ p.kills_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.deaths_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.assists_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.kdr > 1 %}color:green{% elif p.kdr == 1 %}{% else %}color:red{% endif %}">{{ p.kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%">{{ p.acs|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.adr|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.fb_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.fd_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.fb_fd_ratio > 1 %}color:green{% elif p.fb_fd_ratio == 1 %}{% else %}color:red{% endif %}">{{ p.fb_fd_ratio|floatformat:2 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div id="role-side" class="tab-pane table-responsive-lg">
      <table id="table-role-side" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
            <th colspan="2"></th>
            <th style="border-right:1px solid rgb(222, 226, 230)"></th>
            <th colspan="5" style="text-align:center; border-right:1px solid rgb(222, 226, 230)">Attack</th>
            <th colspan="5" style="text-align:center">Defense</th>
          </tr>
          <tr>
              <th>Role</th>
              <th style="text-align:center;" title="Top Agent Played (Hover for all agents)" data-bs-toggle="tooltip" data-bs-placement="top">Top Agent</th>
              <th style="text-align:center; border-right:1px solid rgb(222, 226, 230)" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center" title="Attack Win Percentage" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
              <th style="text-align:center" title="Attack Kills per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center" title="Attack Deaths per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center" title="Attack Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center; border-right:1px solid rgb(222, 226, 230)" title="Attack Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center" title="Defense Win Percentage" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
              <th style="text-align:center" title="Defense Kills per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center" title="Defense Deaths per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center" title="Defense Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Defense Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
          </tr>
        </thead>
        <tbody>
          {% for p in role_splits %}
            <tr>
              <td style="width:4%"> {{ p.Role }} </td>
              <td style="width:2%; text-align:center"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.AgentString }}" data-bs-toggle="tooltip" data-bs-placement="top"></td>
              <td class="mp" style="text-align:center; width:0.5%; border-right:1px solid rgb(222, 226, 230)">{{ p.num_matches }}</td>
              <td style="text-align:center; width:0.2%; {% if p.attack_win_pct > 0.5 %}color:green{% elif p.attack_win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.AttackRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.attack_win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%;">{{ p.attack_kp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%;">{{ p.attack_dp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.attack_kdr > 1 %}color:green{% elif p.attack_kdr == 1 %}{% else %}color:red{% endif %}">{{ p.attack_kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%; border-right:1px solid rgb(222, 226, 230)">{{ p.attack_adr|floatformat:1 }}</td>
              <td style="text-align:center; width:0.2%; {% if p.defense_win_pct > 0.5 %}color:green{% elif p.defense_win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.DefenseRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.defense_win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%;">{{ p.defense_kp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%;">{{ p.defense_dp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.defense_kdr > 1 %}color:green{% elif p.defense_kdr == 1 %}{% else %}color:red{% endif %}">{{ p.defense_kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%;">{{ p.defense_adr|floatformat:1 }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div id="role-highs" class="tab-pane table-responsive-lg">
      <table id="table-role-highs" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
              <th>Role</th>
              <th style="text-align:center;" title="Top Agent Played (Hover for all agents)" data-bs-toggle="tooltip" data-bs-placement="top">Top Agent</th>
              <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center;" title="Most Kills" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center;" title="Most Deaths" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center;" title="Most Assists" data-bs-toggle="tooltip" data-bs-placement="top">A</th>
              <th style="text-align:center;" title="Highest Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Highest Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
              <th style="text-align:center;" title="Highest Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center;" title="Most First Bloods" data-bs-toggle="tooltip" data-bs-placement="top">FB</th>
              <th style="text-align:center;" title="Most First Deaths" data-bs-toggle="tooltip" data-bs-placement="top">FD</th>
          </tr>
        </thead>
        <tbody>
          {% for p in role_splits %}
            <tr>
              <td style="width:4%"> {{ p.Role }} </td>
              <td style="width:1%; text-align:center"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.AgentString }}" data-bs-toggle="tooltip" data-bs-placement="top"></td>
              <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_kills_id %}">{{ p.max_kills }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_deaths_id %}">{{ p.max_deaths }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_assists_id %}">{{ p.max_assists }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_kdr_id %}">{{ p.max_kdr|floatformat:2 }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_acs_id %}">{{ p.max_acs }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_adr_id %}">{{ p.max_adr|floatformat:1 }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_fb_id %}">{{ p.max_fb }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_fd_id %}">{{ p.max_fd }}</a></td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>

  <br>
  <h4 style="font-weight:normal">Agent</h4>

  <ul class="nav nav-tabs" id="agentTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom active" style="font-size:80%;" id="basic-tab" data-bs-toggle="tab" href="#agent-basic" role="tab">Basic</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom" style="font-size:80%;" id="rate-tab" data-bs-toggle="tab" href="#agent-rate" role="tab">Rate</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom" style="font-size:80%;" id="side-tab" data-bs-toggle="tab" href="#agent-side" role="tab">Side</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom" style="font-size:80%;" id="highs-tab" data-bs-toggle="tab" href="#agent-highs" role="tab">Highs</a>
    </li>
  </ul>

  <div id="agent-tabs" class="tab-content">

    <div id="agent-basic" class="tab-pane active table-responsive-lg">
      <table id="table-agent-basic" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
              <th>Agent</th>
              <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center;" title="Percentage of Matches Won" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
              <th style="text-align:center;" title="Kills per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K/20</th>
              <th style="text-align:center;" title="Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Average Damage Delta" data-bs-toggle="tooltip" data-bs-placement="top">DD</th>
              <th style="text-align:center;" title="Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
              <th style="text-align:center;" title="Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center;" title="Headshot Percentage" data-bs-toggle="tooltip" data-bs-placement="top">HS%</th>
              <th style="text-align:center;" title="Percent of Rounds with 1+ Kill" data-bs-toggle="tooltip" data-bs-placement="top">K%</th>
              <th style="text-align:center;" title="Killed/Assisted/Survived/Traded Round Percentage" data-bs-toggle="tooltip" data-bs-placement="top">KAST%</th>
          </tr>
        </thead>
        <tbody>
          {% for p in agent_splits %}
            <tr>
              <td style="width:3%"><a href="{% url 'agent_detail' p.AdjAgent %}"><img src="{{ p.AgentImage }}" alt="{{ p.Agent }}" height=30px title="{{ p.Agent }}" data-bs-toggle="tooltip" data-bs-placement="top"> {{ p.Agent }} </a></td>
              <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
              <td style="text-align:center; width:1%; {% if p.win_pct > 0.5 %}color:green{% elif p.win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.WinLossRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%;">{{ p.kills_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.kdr > 1 %}color:green{% elif p.kdr == 1 %}{% else %}color:red{% endif %}">{{ p.kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%; {% if p.damage_delta > 0 %}color:green{% elif p.damage_delta == 0 %}{% else %}color:red{% endif %}">{{ p.damage_delta|floatformat:0 }}</td>
              <td style="text-align:center; width:1%">{{ p.acs|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.adr|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.hs_pct|floatformat:2 }}</td>
              <td style="text-align:center; width:1%; {% if p.k_pct > 0.5 %}color:green{% elif p.k_pct == 0.5 %}{% else %}color:red{% endif %}">{{ p.k_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%">{{ p.kast|floatformat:3 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div id="agent-rate" class="tab-pane table-responsive-lg">
      <table id="table-agent-rate" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
              <th>Agent</th>
              <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center;" title="Percentage of Rounds Won" data-bs-toggle="tooltip" data-bs-placement="top">Rd Win%</th>
              <th style="text-align:center;" title="Kills per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center;" title="Deaths per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center;" title="Assists per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">A</th>
              <th style="text-align:center;" title="Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
              <th style="text-align:center;" title="Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center;" title="First Bloods per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">FB</th>
              <th style="text-align:center;" title="First Deaths per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">FD</th>
              <th style="text-align:center;" title="First Blood/First Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">FB/FD</th>
          </tr>
        </thead>
        <tbody>
          {% for p in agent_splits %}
            <tr>
              <td style="width:3%"><a href="{% url 'agent_detail' p.AdjAgent %}"><img src="{{ p.AgentImage }}" alt="{{ p.Agent }}" height=30px title="{{ p.Agent }}" data-bs-toggle="tooltip" data-bs-placement="top"> {{ p.Agent }} </a></td>
              <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
              <td style="text-align:center; width:1%; {% if p.round_win_pct > 0.5 %}color:green{% elif p.RoundWinPct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.RoundRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.round_win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%">{{ p.kills_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.deaths_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.assists_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.kdr > 1 %}color:green{% elif p.kdr == 1 %}{% else %}color:red{% endif %}">{{ p.kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%">{{ p.acs|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.adr|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.fb_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.fd_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.fb_fd_ratio > 1 %}color:green{% elif p.fb_fd_ratio == 1 %}{% else %}color:red{% endif %}">{{ p.fb_fd_ratio|floatformat:2 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div id="agent-side" class="tab-pane table-responsive-lg">
      <table id="table-agent-side" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
            <th></th>
            <th style="border-right:1px solid rgb(222, 226, 230)"></th>
            <th colspan="5" style="text-align:center; border-right:1px solid rgb(222, 226, 230)">Attack</th>
            <th colspan="5" style="text-align:center">Defense</th>
          </tr>
          <tr>
              <th>Agent</th>
              <th style="text-align:center; border-right:1px solid rgb(222, 226, 230)" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center" title="Attack Win Percentage" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
              <th style="text-align:center" title="Attack Kills per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center" title="Attack Deaths per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center" title="Attack Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center; border-right:1px solid rgb(222, 226, 230)" title="Attack Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center" title="Defense Win Percentage" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
              <th style="text-align:center" title="Defense Kills per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center" title="Defense Deaths per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center" title="Defense Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Defense Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
          </tr>
        </thead>
        <tbody>
          {% for p in agent_splits %}
            <tr>
              <td style="width:3%"><a href="{% url 'agent_detail' p.AdjAgent %}"><img src="{{ p.AgentImage }}" alt="{{ p.Agent }}" height=30px title="{{ p.Agent }}" data-bs-toggle="tooltip" data-bs-placement="top"> {{ p.Agent }} </a></td>
              <td class="mp" style="text-align:center; width:1%; border-right:1px solid rgb(222, 226, 230)">{{ p.num_matches }}</td>
              <td style="text-align:center; width:0.2%; {% if p.attack_win_pct > 0.5 %}color:green{% elif p.attack_win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.AttackRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.attack_win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%;">{{ p.attack_kp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%;">{{ p.attack_dp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.attack_kdr > 1 %}color:green{% elif p.attack_kdr == 1 %}{% else %}color:red{% endif %}">{{ p.attack_kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%; border-right:1px solid rgb(222, 226, 230)">{{ p.attack_adr|floatformat:1 }}</td>
              <td style="text-align:center; width:0.2%; {% if p.defense_win_pct > 0.5 %}color:green{% elif p.defense_win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.DefenseRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.defense_win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%;">{{ p.defense_kp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%;">{{ p.defense_dp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.defense_kdr > 1 %}color:green{% elif p.defense_kdr == 1 %}{% else %}color:red{% endif %}">{{ p.defense_kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%;">{{ p.defense_adr|floatformat:1 }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div id="agent-highs" class="tab-pane table-responsive-lg">
      <table id="table-agent-highs" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
              <th>Agent</th>
              <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center;" title="Most Kills" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center;" title="Most Deaths" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center;" title="Most Assists" data-bs-toggle="tooltip" data-bs-placement="top">A</th>
              <th style="text-align:center;" title="Highest Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Highest Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
              <th style="text-align:center;" title="Highest Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center;" title="Most First Bloods" data-bs-toggle="tooltip" data-bs-placement="top">FB</th>
              <th style="text-align:center;" title="Most First Deaths" data-bs-toggle="tooltip" data-bs-placement="top">FD</th>
          </tr>
        </thead>
        <tbody>
          {% for p in agent_splits %}
            <tr>
              <td style="width:3%"><a href="{% url 'agent_detail' p.AdjAgent %}"><img src="{{ p.AgentImage }}" alt="{{ p.Agent }}" height=30px title="{{ p.Agent }}" data-bs-toggle="tooltip" data-bs-placement="top"> {{ p.Agent }} </a></td>
              <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_kills_id %}">{{ p.max_kills }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_deaths_id %}">{{ p.max_deaths }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_assists_id %}">{{ p.max_assists }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_kdr_id %}">{{ p.max_kdr|floatformat:2 }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_acs_id %}">{{ p.max_acs }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_adr_id %}">{{ p.max_adr|floatformat:1 }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_fb_id %}">{{ p.max_fb }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_fd_id %}">{{ p.max_fd }}</a></td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>

  <br>
  <h4 style="font-weight:normal">Map</h4>
  
  <ul class="nav nav-tabs" id="mapTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom active" style="font-size:80%;" id="basic-tab" data-bs-toggle="tab" href="#map-basic" role="tab">Basic</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom" style="font-size:80%;" id="rate-tab" data-bs-toggle="tab" href="#map-rate" role="tab">Rate</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom" style="font-size:80%;" id="side-tab" data-bs-toggle="tab" href="#map-side" role="tab">Side</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom" style="font-size:80%;" id="highs-tab" data-bs-toggle="tab" href="#map-highs" role="tab">Highs</a>
    </li>
  </ul>

  <div id="map-tabs" class="tab-content">

    <div id="map-basic" class="tab-pane active table-responsive-lg">
      <table id="table-map-basic" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
              <th>Map</th>
              <th style="text-align:center;" title="Top Agent Played (Hover for all agents)" data-bs-toggle="tooltip" data-bs-placement="top">Top Agent</th>
              <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center;" title="Percentage of Matches Won" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
              <th style="text-align:center;" title="Kills per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K/20</th>
              <th style="text-align:center;" title="Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Average Damage Delta" data-bs-toggle="tooltip" data-bs-placement="top">DD</th>
              <th style="text-align:center;" title="Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
              <th style="text-align:center;" title="Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center;" title="Headshot Percentage" data-bs-toggle="tooltip" data-bs-placement="top">HS%</th>
              <th style="text-align:center;" title="Percent of Rounds with 1+ Kill" data-bs-toggle="tooltip" data-bs-placement="top">K%</th>
              <th style="text-align:center;" title="Killed/Assisted/Survived/Traded Round Percentage" data-bs-toggle="tooltip" data-bs-placement="top">KAST%</th>
          </tr>
        </thead>
        <tbody>
          {% for p in map_splits %}
            <tr>
              <td style="width:7%"><a href="{% url 'map_detail' p.Match__Map %}"> {{ p.Match__Map }} </a></td>
              <td style="width:2%; text-align:center"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.AgentString }}" data-bs-toggle="tooltip" data-bs-placement="top"></td>
              <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
              <td style="text-align:center; width:1%; {% if p.win_pct > 0.5 %}color:green{% elif p.win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.WinLossRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%;">{{ p.kills_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.kdr > 1 %}color:green{% elif p.kdr == 1 %}{% else %}color:red{% endif %}">{{ p.kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%; {% if p.damage_delta > 0 %}color:green{% elif p.damage_delta == 0 %}{% else %}color:red{% endif %}">{{ p.damage_delta|floatformat:0 }}</td>
              <td style="text-align:center; width:1%">{{ p.acs|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.adr|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.hs_pct|floatformat:2 }}</td>
              <td style="text-align:center; width:1%; {% if p.k_pct > 0.5 %}color:green{% elif p.k_pct == 0.5 %}{% else %}color:red{% endif %}">{{ p.k_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%">{{ p.kast|floatformat:3 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div id="map-rate" class="tab-pane table-responsive-lg">
      <table id="table-map-rate" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
              <th>Map</th>
              <th style="text-align:center;" title="Top Agent Played (Hover for all agents)" data-bs-toggle="tooltip" data-bs-placement="top">Top Agent</th>
              <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center;" title="Percentage of Rounds Won" data-bs-toggle="tooltip" data-bs-placement="top">Rd Win%</th>
              <th style="text-align:center;" title="Kills per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center;" title="Deaths per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center;" title="Assists per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">A</th>
              <th style="text-align:center;" title="Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
              <th style="text-align:center;" title="Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center;" title="First Bloods per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">FB</th>
              <th style="text-align:center;" title="First Deaths per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">FD</th>
              <th style="text-align:center;" title="First Blood/First Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">FB/FD</th>
          </tr>
        </thead>
        <tbody>
          {% for p in map_splits %}
            <tr>
              <td style="width:7%"><a href="{% url 'map_detail' p.Match__Map %}"> {{ p.Match__Map }} </a></td>
              <td style="width:2%; text-align:center"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.AgentString }}" data-bs-toggle="tooltip" data-bs-placement="top"></td>
              <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
              <td style="text-align:center; width:2%; {% if p.round_win_pct > 0.5 %}color:green{% elif p.RoundWinPct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.RoundRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.round_win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%">{{ p.kills_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.deaths_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.assists_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.kdr > 1 %}color:green{% elif p.kdr == 1 %}{% else %}color:red{% endif %}">{{ p.kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%">{{ p.acs|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.adr|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.fb_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.fd_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.fb_fd_ratio > 1 %}color:green{% elif p.fb_fd_ratio == 1 %}{% else %}color:red{% endif %}">{{ p.fb_fd_ratio|floatformat:2 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div id="map-side" class="tab-pane table-responsive-lg">
      <table id="table-map-side" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
            <th colspan="2"></th>
            <th style="border-right:1px solid rgb(222, 226, 230)"></th>
            <th colspan="5" style="text-align:center; border-right:1px solid rgb(222, 226, 230)">Attack</th>
            <th colspan="5" style="text-align:center">Defense</th>
          </tr>
          <tr>
              <th>Map</th>
              <th style="text-align:center;" title="Top Agent Played (Hover for all agents)" data-bs-toggle="tooltip" data-bs-placement="top">Top Agent</th>
              <th style="text-align:center; border-right:1px solid rgb(222, 226, 230)" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center" title="Attack Win Percentage" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
              <th style="text-align:center" title="Attack Kills per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center" title="Attack Deaths per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center" title="Attack Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center; border-right:1px solid rgb(222, 226, 230)" title="Attack Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center" title="Defense Win Percentage" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
              <th style="text-align:center" title="Defense Kills per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center" title="Defense Deaths per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center" title="Defense Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Defense Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
          </tr>
        </thead>
        <tbody>
          {% for p in map_splits %}
            <tr>
              <td style="width:7%"><a href="{% url 'map_detail' p.Match__Map %}"> {{ p.Match__Map }} </a></td>
              <td style="width:2%; text-align:center"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.AgentString }}" data-bs-toggle="tooltip" data-bs-placement="top"></td>
              <td class="mp" style="text-align:center; width:0.5%; border-right:1px solid rgb(222, 226, 230)">{{ p.num_matches }}</td>
              <td style="text-align:center; width:0.2%; {% if p.attack_win_pct > 0.5 %}color:green{% elif p.attack_win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.AttackRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.attack_win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%;">{{ p.attack_kp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%;">{{ p.attack_dp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.attack_kdr > 1 %}color:green{% elif p.attack_kdr == 1 %}{% else %}color:red{% endif %}">{{ p.attack_kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%; border-right:1px solid rgb(222, 226, 230)">{{ p.attack_adr|floatformat:1 }}</td>
              <td style="text-align:center; width:0.2%; {% if p.defense_win_pct > 0.5 %}color:green{% elif p.defense_win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.DefenseRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.defense_win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%;">{{ p.defense_kp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%;">{{ p.defense_dp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.defense_kdr > 1 %}color:green{% elif p.defense_kdr == 1 %}{% else %}color:red{% endif %}">{{ p.defense_kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%;">{{ p.defense_adr|floatformat:1 }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div id="map-highs" class="tab-pane table-responsive-lg">
      <table id="table-map-highs" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
              <th>Map</th>
              <th style="text-align:center;" title="Top Agent Played (Hover for all agents)" data-bs-toggle="tooltip" data-bs-placement="top">Top Agent</th>
              <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center;" title="Most Kills" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center;" title="Most Deaths" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center;" title="Most Assists" data-bs-toggle="tooltip" data-bs-placement="top">A</th>
              <th style="text-align:center;" title="Highest Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Highest Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
              <th style="text-align:center;" title="Highest Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center;" title="Most First Bloods" data-bs-toggle="tooltip" data-bs-placement="top">FB</th>
              <th style="text-align:center;" title="Most First Deaths" data-bs-toggle="tooltip" data-bs-placement="top">FD</th>
          </tr>
        </thead>
        <tbody>
          {% for p in map_splits %}
            <tr>
              <td style="width:7%"><a href="{% url 'map_detail' p.Match__Map %}"> {{ p.Match__Map }} </a></td>
              <td style="width:2%; text-align:center"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.AgentString }}" data-bs-toggle="tooltip" data-bs-placement="top"></td>
              <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_kills_id %}">{{ p.max_kills }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_deaths_id %}">{{ p.max_deaths }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_assists_id %}">{{ p.max_assists }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_kdr_id %}">{{ p.max_kdr|floatformat:2 }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_acs_id %}">{{ p.max_acs }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_adr_id %}">{{ p.max_adr|floatformat:1 }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_fb_id %}">{{ p.max_fb }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_fd_id %}">{{ p.max_fd }}</a></td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>

  <br>
  <h4 style="font-weight:normal">Match Outcome</h4>

  <ul class="nav nav-tabs" id="outcomeTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom active" style="font-size:80%;" id="basic-tab" data-bs-toggle="tab" href="#outcome-basic" role="tab">Basic</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom" style="font-size:80%;" id="rate-tab" data-bs-toggle="tab" href="#outcome-rate" role="tab">Rate</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom" style="font-size:80%;" id="side-tab" data-bs-toggle="tab" href="#outcome-side" role="tab">Side</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link nav-custom" style="font-size:80%;" id="highs-tab" data-bs-toggle="tab" href="#outcome-highs" role="tab">Highs</a>
    </li>
  </ul>

  <div id="outcome-tabs" class="tab-content">

    <div id="outcome-basic" class="tab-pane active table-responsive-lg">
      <table id="table-outcome-basic" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
              <th>Outcome</th>
              <th style="text-align:center;" title="Top Agent Played (Hover for all agents)" data-bs-toggle="tooltip" data-bs-placement="top">Top Agent</th>
              <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center;" title="Percentage of Matches Won" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
              <th style="text-align:center;" title="Kills per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K/20</th>
              <th style="text-align:center;" title="Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Average Damage Delta" data-bs-toggle="tooltip" data-bs-placement="top">DD</th>
              <th style="text-align:center;" title="Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
              <th style="text-align:center;" title="Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center;" title="Headshot Percentage" data-bs-toggle="tooltip" data-bs-placement="top">HS%</th>
              <th style="text-align:center;" title="Percent of Rounds with 1+ Kill" data-bs-toggle="tooltip" data-bs-placement="top">K%</th>
              <th style="text-align:center;" title="Killed/Assisted/Survived/Traded Round Percentage" data-bs-toggle="tooltip" data-bs-placement="top">KAST%</th>
          </tr>
        </thead>
        <tbody>
          {% for p in outcome_splits %}
            <tr>
              <td style="width:7%; {% if p.Outcome == 'Win' %} color:green {% elif p.Outcome == 'Loss' %} color:red {% endif %}"> {{ p.Outcome }} </td>
              <td style="width:2%; text-align:center"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.AgentString }}" data-bs-toggle="tooltip" data-bs-placement="top"></td>
              <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
              <td style="text-align:center; width:1%; {% if p.win_pct > 0.5 %}color:green{% elif p.win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.WinLossRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%;">{{ p.kills_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.kdr > 1 %}color:green{% elif p.kdr == 1 %}{% else %}color:red{% endif %}">{{ p.kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%; {% if p.damage_delta > 0 %}color:green{% elif p.damage_delta == 0 %}{% else %}color:red{% endif %}">{{ p.damage_delta|floatformat:0 }}</td>
              <td style="text-align:center; width:1%">{{ p.acs|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.adr|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.hs_pct|floatformat:2 }}</td>
              <td style="text-align:center; width:1%; {% if p.k_pct > 0.5 %}color:green{% elif p.k_pct == 0.5 %}{% else %}color:red{% endif %}">{{ p.k_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%">{{ p.kast|floatformat:3 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div id="outcome-rate" class="tab-pane table-responsive-lg">
      <table id="table-outcome-rate" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
              <th>Outcome</th>
              <th style="text-align:center;" title="Top Agent Played (Hover for all agents)" data-bs-toggle="tooltip" data-bs-placement="top">Top Agent</th>
              <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center;" title="Percentage of Rounds Won" data-bs-toggle="tooltip" data-bs-placement="top">Rd Win%</th>
              <th style="text-align:center;" title="Kills per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center;" title="Deaths per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center;" title="Assists per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">A</th>
              <th style="text-align:center;" title="Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
              <th style="text-align:center;" title="Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center;" title="First Bloods per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">FB</th>
              <th style="text-align:center;" title="First Deaths per 20 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">FD</th>
              <th style="text-align:center;" title="First Blood/First Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">FB/FD</th>
          </tr>
        </thead>
        <tbody>
          {% for p in outcome_splits %}
            <tr>
              <td style="width:7%; {% if p.Outcome == 'Win' %} color:green {% elif p.Outcome == 'Loss' %} color:red {% endif %}"> {{ p.Outcome }} </td>
              <td style="width:2%; text-align:center"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.AgentString }}" data-bs-toggle="tooltip" data-bs-placement="top"></td>
              <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
              <td style="text-align:center; width:2%; {% if p.round_win_pct > 0.5 %}color:green{% elif p.RoundWinPct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.RoundRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.round_win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%">{{ p.kills_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.deaths_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.assists_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.kdr > 1 %}color:green{% elif p.kdr == 1 %}{% else %}color:red{% endif %}">{{ p.kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%">{{ p.acs|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.adr|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.fb_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%">{{ p.fd_per_20|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.fb_fd_ratio > 1 %}color:green{% elif p.fb_fd_ratio == 1 %}{% else %}color:red{% endif %}">{{ p.fb_fd_ratio|floatformat:2 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div id="outcome-side" class="tab-pane table-responsive-lg">
      <table id="table-outcome-side" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
            <th colspan="2"></th>
            <th style="border-right:1px solid rgb(222, 226, 230)"></th>
            <th colspan="5" style="text-align:center; border-right:1px solid rgb(222, 226, 230)">Attack</th>
            <th colspan="5" style="text-align:center">Defense</th>
          </tr>
          <tr>
              <th>Outcome</th>
              <th style="text-align:center;" title="Top Agent Played (Hover for all agents)" data-bs-toggle="tooltip" data-bs-placement="top">Top Agent</th>
              <th style="text-align:center; border-right:1px solid rgb(222, 226, 230)" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center" title="Attack Win Percentage" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
              <th style="text-align:center" title="Attack Kills per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center" title="Attack Deaths per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center" title="Attack Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center; border-right:1px solid rgb(222, 226, 230)" title="Attack Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center" title="Defense Win Percentage" data-bs-toggle="tooltip" data-bs-placement="top">Win%</th>
              <th style="text-align:center" title="Defense Kills per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center" title="Defense Deaths per 12 Rounds" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center" title="Defense Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Defense Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
          </tr>
        </thead>
        <tbody>
          {% for p in outcome_splits %}
            <tr>
              <td style="width:7%; {% if p.Outcome == 'Win' %} color:green {% elif p.Outcome == 'Loss' %} color:red {% endif %}"> {{ p.Outcome }} </td>
              <td style="width:2%; text-align:center"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.AgentString }}" data-bs-toggle="tooltip" data-bs-placement="top"></td>
              <td class="mp" style="text-align:center; width:0.5%; border-right:1px solid rgb(222, 226, 230)">{{ p.num_matches }}</td>
              <td style="text-align:center; width:0.2%; {% if p.attack_win_pct > 0.5 %}color:green{% elif p.attack_win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.AttackRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.attack_win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%;">{{ p.attack_kp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%;">{{ p.attack_dp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.attack_kdr > 1 %}color:green{% elif p.attack_kdr == 1 %}{% else %}color:red{% endif %}">{{ p.attack_kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%; border-right:1px solid rgb(222, 226, 230)">{{ p.attack_adr|floatformat:1 }}</td>
              <td style="text-align:center; width:0.2%; {% if p.defense_win_pct > 0.5 %}color:green{% elif p.defense_win_pct == 0.5 %}{% else %}color:red{% endif %}" title="{{ p.DefenseRecord }}" data-bs-toggle="tooltip" data-bs-placement="top">{{ p.defense_win_pct|floatformat:3 }}</td>
              <td style="text-align:center; width:1%;">{{ p.defense_kp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%;">{{ p.defense_dp12|floatformat:1 }}</td>
              <td style="text-align:center; width:1%; {% if p.defense_kdr > 1 %}color:green{% elif p.defense_kdr == 1 %}{% else %}color:red{% endif %}">{{ p.defense_kdr|floatformat:2 }}</td>
              <td style="text-align:center; width:1%;">{{ p.defense_adr|floatformat:1 }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div id="outcome-highs" class="tab-pane table-responsive-lg">
      <table id="table-outcome-highs" class=" table table-hover table-striped table-sm center"
              style="overflow:hidden; width:75%; border:1px solid rgb(168, 168, 168)">
        <thead>
          <tr>
              <th>Outcome</th>
              <th style="text-align:center;" title="Top Agent Played (Hover for all agents)" data-bs-toggle="tooltip" data-bs-placement="top">Top Agent</th>
              <th style="text-align:center;" title="Matches Played" data-bs-toggle="tooltip" data-bs-placement="top">MP</th>
              <th style="text-align:center;" title="Most Kills" data-bs-toggle="tooltip" data-bs-placement="top">K</th>
              <th style="text-align:center;" title="Most Deaths" data-bs-toggle="tooltip" data-bs-placement="top">D</th>
              <th style="text-align:center;" title="Most Assists" data-bs-toggle="tooltip" data-bs-placement="top">A</th>
              <th style="text-align:center;" title="Highest Kill/Death Ratio" data-bs-toggle="tooltip" data-bs-placement="top">K/D</th>
              <th style="text-align:center;" title="Highest Average Combat Score" data-bs-toggle="tooltip" data-bs-placement="top">ACS</th>
              <th style="text-align:center;" title="Highest Average Damage per Round" data-bs-toggle="tooltip" data-bs-placement="top">ADR</th>
              <th style="text-align:center;" title="Most First Bloods" data-bs-toggle="tooltip" data-bs-placement="top">FB</th>
              <th style="text-align:center;" title="Most First Deaths" data-bs-toggle="tooltip" data-bs-placement="top">FD</th>
          </tr>
        </thead>
        <tbody>
          {% for p in outcome_splits %}
            <tr>
              <td style="width:7%; {% if p.Outcome == 'Win' %} color:green {% elif p.Outcome == 'Loss' %} color:red {% endif %}"> {{ p.Outcome }} </td>
              <td style="width:2%; text-align:center"><img src="{{ p.TopAgentImage }}" alt="{{ p.TopAgent }}" height=30px title="{{ p.AgentString }}" data-bs-toggle="tooltip" data-bs-placement="top"></td>
              <td class="mp" style="text-align:center; width:1%">{{ p.num_matches }}</td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_kills_id %}">{{ p.max_kills }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_deaths_id %}">{{ p.max_deaths }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_assists_id %}">{{ p.max_assists }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_kdr_id %}">{{ p.max_kdr|floatformat:2 }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_acs_id %}">{{ p.max_acs }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_adr_id %}">{{ p.max_adr|floatformat:1 }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_fb_id %}">{{ p.max_fb }}</a></td>
              <td style="text-align:center; width:1%"><a href="{% url 'match_detail' p.max_fd_id %}">{{ p.max_fd }}</a></td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>

</div>
{% endblock %}
